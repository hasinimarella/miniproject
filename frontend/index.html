<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hospital Feedback App</title>

<!-- PWA -->
<link rel="manifest" href="/static/manifest.json">
<meta name="theme-color" content="#2563eb">
<meta name="apple-mobile-web-app-capable" content="yes">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#ff00a0;
  --bg:#f8fafc;
  --card:#fff;
  --muted:#64748b;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:var(--bg);
}
.app{
  max-width:420px;
  margin:auto;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  padding:16px;
  background:linear-gradient(135deg,var(--primary),#c6007a);
  color:#fff;
  border-radius:0 0 24px 24px;
}
.content{padding:16px;flex:1}
.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  margin-bottom:16px;
}
.input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #e5e7eb;
  margin-bottom:10px;
}
.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:var(--primary);
  color:#fff;
  font-weight:600;
}
.bottom-nav{
  display:flex;
  justify-content:space-around;
  padding:10px;
  background:#fff;
  border-top:1px solid #e5e7eb;
}
.nav-item{
  background:none;
  border:none;
  font-size:12px;
  color:#555;
}
.nav-item.active{color:#2563eb;font-weight:600}

/* Toast */
#toast{
  position:fixed;
  bottom:80px;
  left:50%;
  transform:translateX(-50%);
  background:var(--primary);
  color:#fff;
  padding:12px 20px;
  border-radius:14px;
  display:none;
}

/* Voice Animation */
#voiceUI{text-align:center;display:none}
.mic{
  width:60px;
  height:60px;
  border-radius:50%;
  background:#ef4444;
  margin:auto;
  animation:pulse 1.2s infinite;
}
@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.3);opacity:.6}
  100%{transform:scale(1)}
}
</style>
</head>

<body>
<div class="app">

<header>
  <h2>üè• Hospital Feedback</h2>
  <p>AI-powered sentiment system</p>
</header>

<div class="content">

  <div class="card" style="margin-top:40px">
    <h3>üë®‚Äç‚öïÔ∏è Doctor Login</h3>
    <input id="doctorId" class="input" placeholder="Doctor ID (e.g. DOC001)">
    <input id="doctorPwd" class="input" type="password" placeholder="Password">
    <button class="btn" onclick="doctorLogin()">Login</button>
    <p style="font-size:13px;color:#64748b;margin-top:10px">After login you will be redirected to the admin panel.</p>
  </div>

  <div class="card">
    <h3>üìù Patient Feedback</h3>
    <p style="font-size:13px;color:#64748b;margin-bottom:12px">Patients can submit feedback anonymously or with their details.</p>
    <button class="btn" style="background:#10b981" onclick="openPatientFeedback()">Open Feedback Form</button>
  </div>

</div>

<nav class="bottom-nav">
  <button class="nav-item active">üè† Home</button>
  <button class="nav-item" onclick="goDashboard()">üìä Dashboard</button>
</nav>

</div>

<div id="toast"></div>

<script>
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('/static/service-worker.js');
}

function showToast(msg){
  const t=document.getElementById('toast');
  t.innerText=msg;
  t.style.display='block';
  setTimeout(()=>t.style.display='none',2500);
}

function recordFeedback(){
  document.getElementById('voiceUI').style.display='block';
  showToast("Recording started");
  setTimeout(()=>{
    document.getElementById('voiceUI').style.display='none';
    showToast("Feedback recorded");
  },4000);
}

function doctorLogin(){
  const id = (document.getElementById('doctorId')||{}).value?.trim();
  const pwd = (document.getElementById('doctorPwd')||{}).value?.trim();
  if(!id){ showToast('Please enter Doctor ID'); return; }

  // For now do client-side lightweight check and store doctor id in session
  sessionStorage.setItem('doctorId', id);
  showToast("Login successful");
  setTimeout(()=>{
    // Redirect to admin panel after login
    window.location.href = '/admin';
  },800);
}
function openPatientFeedback(){
  window.location.href = '/feedback/general';
}
function goDashboard(){window.location.href='/dashboard'}
</script>
</body>
</html>
